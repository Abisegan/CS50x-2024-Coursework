{% extends "layout.html" %}

{% block title %}
    Admin
{% endblock %}

{% block main %}
<h2>Admin Dashboard</h2>
<h3>All Orders</h3>
<table class="table table-bordered">
    <thead>
        <tr>
            <th>ID</th>
            <th>User ID</th>
            <th>Device</th>
            <th>Location</th>
            <th>Status</th>
            <th>Date</th>
            <th>Update Status</th>
        </tr>
    </thead>
    <tbody>
        {% for order in orders %}
        <tr>
            <td>{{ order["id"] }}</td>
            <td>{{ order["user_id"] }}</td>
            <td>{{ order["device"] }}</td>
            <td><a href="{{ order.location }}" target="_blank">View Location</a></td>
            <td>{{ order["status"] }}</td>
            <td>{{ order["date"] }}</td>
            <td>
                <form method="POST" action="/admin">
                    <input type="hidden" name="order_id" value="{{ order.id }}">
                    <select class="form-control" name="status">
                        <option disabled selected value="">Status</option>
                        {% for status in statuses %}
                            <option value="{{ status }}">{{ status }}</option>
                        {% endfor %}
                    </select>
                    <button type="submit" class="btn btn-success mt-1">Update</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
